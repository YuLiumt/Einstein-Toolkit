<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Yu Liu">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Cactus - Yu Liu's Notebook</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Cactus";
    var mkdocs_page_input_path = "ET/Cactus.md";
    var mkdocs_page_url = "/Einstein-Toolkit/ET/Cactus/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-36723568-3', 'https://yuliumt.github.io');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Yu Liu's Notebook</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Einstein Toolkit</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../Install/">Install</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Cactus</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#parameter-file-syntax">Parameter File Syntax</a></li>
    

    <li class="toctree-l3"><a href="#cactus-application-interfaces">Cactus Application Interfaces</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#iterating-over-grid-points">Iterating Over Grid Points</a></li>
        
            <li><a class="toctree-l4" href="#coordinates">Coordinates</a></li>
        
            <li><a class="toctree-l4" href="#io">I/O</a></li>
        
            <li><a class="toctree-l4" href="#interpolation-operators">Interpolation Operators</a></li>
        
            <li><a class="toctree-l4" href="#reduction-operators">Reduction Operators</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../Thorn/">Thorn</a>
                </li>
                <li class="">
                    
    <a class="" href="../Source File/">Source File</a>
                </li>
                <li class="">
                    
    <a class="" href="../parameter/">Parameter</a>
                </li>
                <li class="">
                    
    <a class="" href="../Lorene/">Lorene</a>
                </li>
                <li class="">
                    
    <a class="" href="../Visualization/">Visualization</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">General Relativity</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../GR/Differential geometry/">Differential geometry</a>
                </li>
                <li class="">
                    
    <a class="" href="../../GR/Einstein Equation/">Einstein Equation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../GR/Solutions/">Solutions</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Gravitational Wave</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../GW/Introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../GW/Linearized Waves/">Linearized Waves</a>
                </li>
                <li class="">
                    
    <a class="" href="../../GW/Extracting Gravitational Waveforms/">Extracting Gravitational Waveforms</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Numerical Relativity</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../NR/Introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../NR/3+1 Decomposition/">3+1 Decomposition</a>
                </li>
                <li class="">
                    
    <a class="" href="../../NR/ADM/">ADM</a>
                </li>
                <li class="">
                    
    <a class="" href="../../NR/BSSN/">BSSN</a>
                </li>
                <li class="">
                    
    <a class="" href="../../NR/MHD/">MHD</a>
                </li>
                <li class="">
                    
    <a class="" href="../../NR/Conformal Transformation/">Conformal Transformation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../NR/Coordinates/">Coordinates</a>
                </li>
                <li class="">
                    
    <a class="" href="../../NR/Matter Sources/">Matter Sources</a>
                </li>
                <li class="">
                    
    <a class="" href="../../NR/Numerical Methods/">Numerical Methods</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Search Pipeline</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../SP/Introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../SP/matched filter/">Matched Filtering</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Example</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../Example/Poisson/">Poisson</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Yu Liu's Notebook</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Einstein Toolkit &raquo;</li>
        
      
    
    <li>Cactus</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/YuLiumt/Einstein-Toolkit/edit/master/docs/ET/Cactus.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><strong>Program Flow</strong></p>
<p><img alt="-w847" src="../media/15524403552358.jpg" /></p>
<p>Cactus executables always run from a parameter file, which specifies which thorns to use and sets the values of each thorn’s parameters (the parameters that are not set will take on default values).</p>
<p>There is no restriction on the name of the parameter file, although it is conventional to use the file extension <code class="codehilite"><span class="na">.par</span></code>.</p>
<p>A parameter file is a text file whose lines are either comments or parameter statements. Comments are blank lines or lines that begin with ‘#’. A parameter statement consists of one or more parameter names, followed by an ‘=’, followed by the value(s) for this (these) parameter(s).</p>
<p>The first parameter statement in any parameter file should set ActiveThorns, which is a special parameter that tells the program which thorns are to be activated. Only parameters from active thorns can be set (and only those routines scheduled by active thorns are run). By default all thorns are inactive.</p>
<p>For example,</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>ActiveThorns = &quot;CartGrid3D&quot;
</pre></div>
</td></tr></table>

<p>Parameter specifications following ActiveThorns usually are carried out by listing the name of the thorn which defined the parameter, two colons, and the name of the parameter</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>wavetoyF77::amplitude
</pre></div>
</td></tr></table>

<p>Screen output</p>
<hr />
<p>As your Cactus executable runs, standard output and standard error are usually written to the screen. Standard output provides you with information about the run, and standard error reports warnings and errors from the flesh and thorns.</p>
<p>As the program runs, the normal output provides the following information:</p>
<ul>
<li>Active thorns: This report shows whether the thorn activation was successful, and if successful gives the thorn’s implementation.</li>
<li>Failed parameters: If any of the parameters in the parameter file does not belong to any of the active thorns, or if the parameter value is not in the allowed range, an error is registered.</li>
</ul>
<p>For example, </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Activating thorn idscalarwave...Success -&gt; active implementation idscalarwave
# if the parameter is not recognised
Unknown parameter time::ddtfac
# if the parameter value is not in the allowed range
Unable to set keyword CartGrid3D::type - ByMouth not in any active range
</pre></div>
</td></tr></table>

<p>Checkpointing</p>
<hr />
<p>Checkpointing is defined as saving the current state of a run to a file. At a later time, this run can then be restarted from that state by recovering all the data from the checkpoint file.</p>
<p>Cactus checkpointing and recovery methods are provided by thorns. In general, these thorns decide how often to generate a checkpoint.</p>
<h3 id="parameter-file-syntax">Parameter File Syntax</h3>
<p>A parameter file (or par file) is used to control the behaviour of a Cactus executable. </p>
<p>A parameter statement is an expression of the form <code class="codehilite">Left-Hand-Side = Right-Hand-Side</code>. The <code class="codehilite">Left-Hand-Side</code> may be a fully qualified parameter name. The <code class="codehilite">Right-Hand-Side</code> is a value.</p>
<p>Values can be any of the following</p>
<ul>
<li><strong>Booleans</strong>: Booleans are either true (i.e. 1, true, on, "true", or "on") or false (i.e. 0, false, off, "false", or "off").</li>
<li><strong>Integers</strong>: Integers can be positive or negative.</li>
<li><strong>Real numbers</strong>: Real numbers can be positive or negative and may be written with exponents (e.g. 1.0e-3, or -2.94d+10).</li>
<li><strong>Strings</strong>: Sequences of characters delimited by quotes.</li>
<li><strong>Variables</strong>: Parameter values can also contain variables of the form <code class="codehilite"><span class="cp">${</span><span class="n">VARIABLE</span><span class="cp">}</span></code> or <code class="codehilite">$ENV{VARIABLE}</code>.</li>
<li><strong>Expressions</strong>: Parameters statements of numeric or boolean type can use arithmetic expressions in place of explicit values.</li>
<li><strong>Array assignments</strong>: Arrays of parameters can be set by including an integer expression inside the square brackets following the name, e.g. <code class="codehilite">thorn::parameters[0]</code>. Optionally, an array of parameters may be set by means of a comma delimited list of values inside square brackets, e.g. <code class="codehilite">thorn::parameters = [4.8, 3.2]</code>.</li>
</ul>
<p><img alt="-w913" src="../media/15513391903942.jpg" /></p>
<p>Please see the file <code class="codehilite">par.peg</code> in the directory <code class="codehilite">Cactus/src/piraha/pegs</code> for the full grammar describing the par file.</p>
<p>The parameter file is read sequentially from top to bottom, this means that if you set the value of a parameter twice in the parameter file, the second value will be used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can obtain lists of the parameters associated with each thorn using the command-line options.</p>
<p><code class="codehilite">-O</code>: Prints a full list of all parameters from all thorns which were compiled, along with descriptions and allowed values.</p>
<p><code class="codehilite">-o</code>: Prints the description and allowed values for a given parameter—takes one argument.</p>
</div>
<h3 id="cactus-application-interfaces">Cactus Application Interfaces</h3>
<h4 id="iterating-over-grid-points">Iterating Over Grid Points</h4>
<hr />
<p>A grid function consists of a multi-dimensional array of grid points. These grid points fall into several types:</p>
<ul>
<li>interior: regular grid point, presumably evolved in time</li>
<li>ghost: inter-process boundary, containing copies of values owned by another process </li>
<li>physical boundary: outer boundary, presumably defined via a boundary condition </li>
<li>symmetry boundary: defined via a symmetry, e.g. a reflection symmetry or periodicity</li>
</ul>
<p>Grid points in the edges and corners may combine several types. For example, a point in a corner may be a ghost point in the x direction, a physical boundary point in the y direction, and a symmetry point in the z direction.</p>
<p>The size of the physical boundary depends on the application. The number of ghost points is defined by the driver; the number of symmetry points is in principle defined by the thorn implementing the respective symmetry condition, but will in general be the same as the number of ghost points to avoid inconsistencies.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When iterating over grid points, one usually needs to know about the boundary sizes and boundary types present.</p>
</div>
<p>The flesh provides a set of macros to iterate over particular types of grid points:</p>
<ul>
<li>CCTK_LOOP_ALL: Loop over all grid points</li>
<li>CCTK_LOOP_INT: Loop over all interior grid points</li>
<li>CCTK_LOOP_BND: Loop over all physical boundary points</li>
<li>CCTK_LOOP_INTBND: Loop over all “interior” physical boundary points, i.e. over all those physical boundary points that are not also ghost or symmetry points</li>
</ul>
<p>As described above, points on edges and corners can have several boundary types at once, e.g. can be both a physical and a symmetry point. LOOP_BND and LOOP_INTBND treat these different: LOOP_BND loops over all points that are physical boundaries (independent of whether they also are symmetry or ghost boundaries), while LOOP_INTBND loops over those points that are only physical boundaries (and excludes any points that belongs to a symmetry or ghost boundary). LOOP_BND does not require applying a symmetry condition or synchronisation afterwards (but does not allow taking tangential derivatives); LOOP_INTBND allows taking tangential derivatives (but requires applying symmetry boundaries and synchronising afterwards).</p>
<h4 id="coordinates">Coordinates</h4>
<p>The flesh provides utility routines for registering and querying coordinate information. The flesh does not provide any coordinates itself, these must be supplied by a thorn. Thorns are not required to register coordinates to the flesh, but registering coordinates provides a means for infrastructure thorns to make use of coordinate information.</p>
<h4 id="io">I/O</h4>
<p>To allow flexible I/O, the flesh itself does not provide any output routines, however it provides a mechanism for thorns to register different routines as I/O methods.</p>
<h4 id="interpolation-operators">Interpolation Operators</h4>
<p>The flesh does not provide interpolation routines by itself. Instead, it offers a general function API to thorns, for the registration and invocation of interpolation operators.</p>
<h4 id="reduction-operators">Reduction Operators</h4>
<p>A reduction operation can be defined as an operation on variables distributed across multiple processor resulting in a single number. Typical reduction operations are: sum, minimum/maximum value, and boolean operations. A typical application is, for example, finding the maximum reduction from processor local error estimates, therefore, making the previous processor local error known to all processors.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Thorn/" class="btn btn-neutral float-right" title="Thorn">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Install/" class="btn btn-neutral" title="Install"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/YuLiumt/Einstein-Toolkit/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../Install/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Thorn/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
